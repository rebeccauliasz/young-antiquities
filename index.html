<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - multiple canvases - grid</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			html, body {
				color: #808080;
				font-family: Monospace;
				font-size: 13px;
				text-align: center;
				background-color: #fff;
				margin: 0px;
				overflow: hidden;
				width: 100%;
				height: 100%;
			}
			#info {
				position: absolute;
				top: 0px; width: 100%;
				padding: 5px;
			}
			#centerer {
				display: table;
				width: 100%;
				height: 100%;
			}
			#centerer-cell {
				display: table-cell;
				vertical-align: middle;
			}
			#container {
				margin-left: auto;
				margin-right: auto;
				width: 906px;  /* 300*3 + border; */
			}
			#container div {
				float: left;
			}
			#canvas1, #canvas2, #canvas3, #canvas4, #canvas5, #canvas6, #canvas7, #canvas8, #canvas9{
				position: relative;
				width: 300px;
				height: 200px;
				border: 1px solid black;
				float: left;
			}
			a {
				color: #0080ff;
			}
		</style>
	</head>
	<body>
		<div id="centerer">
			<div id="centerer-cell">
				<div id="container">
					<div class="container-row">
						<canvas id="canvas1"></canvas>
						<canvas id="canvas2"></canvas>
						<canvas id="canvas3"></canvas>
					</div>
					<div class="container-row">
						<canvas id="canvas4"></canvas>
						<canvas id="canvas5"></canvas>
						<canvas id="canvas6"></canvas>
					</div>
					<div class="container-row">
						<canvas id="canvas7"></canvas>
						<canvas id="canvas8"></canvas>
						<canvas id="canvas9"></canvas>
					</div>
				</div>
			</div>
		</div>
		<div id="info">lovid: objs</div>

		<script src="build/three.js"></script>

		<script src="js/Detector.js"></script>
		<script src="js/loaders/DDSLoader.js"></script>
		<script src="js/loaders/MTLLoader.js"></script>
		<script src="js/loaders/OBJLoader.js"></script>
		<script src="js/controls/OrbitControls.js"></script>

		<script src="js/Detector.js"></script>
		<script src="js/libs/stats.min.js"></script>

		<script src="js/renderers/Projector.js"></script>
		<script src="js/renderers/CanvasRenderer.js"></script>

		<script>
			if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
			var views = [];
			var scene, renderer;
			var contols; 
			//var cameras = []; 
			var mouseX = 0, mouseY = 0;
			var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;

		
			var SCREEN_HEIGHT = window.innerHeight;
			var SCREEN_WIDTH = window.innerWidth;
			var mouse; 
			//var objects = []; 

			mouse = new THREE.Vector2();
			var mouseDown = false;

			var object1; 
			var object2; 
			var object3; 
			var object4; 
			var object5; 
			var object6; 
			var object7; 
			var object8; 
			var object9; 

			init();
			animate();




			
		

			//camera
			function View( canvas, fullWidth, fullHeight, viewX, viewY, viewWidth, viewHeight ) {
				canvas.width = viewWidth * window.devicePixelRatio;
				canvas.height = viewHeight * window.devicePixelRatio;
				var context = canvas.getContext( '2d' );
				var camera = new THREE.PerspectiveCamera( 20, viewWidth / viewHeight, 1, 10000 );
				camera.setViewOffset( fullWidth, fullHeight, viewX, viewY, viewWidth, viewHeight );
				camera.position.z = 75;
				this.render = function () {
					camera.position.x += ( mouseX/15 - camera.position.x ) * 0.01;
					camera.position.y += ( - mouseY/15 - camera.position.y ) * 0.01;
					camera.lookAt( scene.position );
					renderer.render( scene, camera );
					context.drawImage( renderer.domElement, 0, 0 );
				};
				//cameras.push(camera); 
				

			}
			//
			function init() {
				var canvas1 = document.getElementById( 'canvas1' );
				var canvas2 = document.getElementById( 'canvas2' );
				var canvas3 = document.getElementById( 'canvas3' );
				var canvas4 = document.getElementById( 'canvas4' );
				var canvas5 = document.getElementById( 'canvas5' );
				var canvas6 = document.getElementById( 'canvas6' );
				var canvas7 = document.getElementById( 'canvas7' );
				var canvas8 = document.getElementById( 'canvas8' );
				var canvas9 = document.getElementById( 'canvas9' );
				var w = 300, h = 200;
				var fullWidth = w * 3;
				var fullHeight = h * 3;

				views.push( new View( canvas1, fullWidth, fullHeight, w * 0, h * 0, w, h ) );
				views.push( new View( canvas2, fullWidth, fullHeight, w * 1, h * 0, w, h ) );
				views.push( new View( canvas3, fullWidth, fullHeight, w * 2, h * 0, w, h ) );
				views.push( new View( canvas4, fullWidth, fullHeight, w * 0, h * 1, w, h ) );
				views.push( new View( canvas5, fullWidth, fullHeight, w * 1, h * 1, w, h ) );
				views.push( new View( canvas6, fullWidth, fullHeight, w * 2, h * 1, w, h ) );
				views.push( new View( canvas7, fullWidth, fullHeight, w * 0, h * 2, w, h ) );
				views.push( new View( canvas8, fullWidth, fullHeight, w * 1, h * 2, w, h ) );
				views.push( new View( canvas9, fullWidth, fullHeight, w * 2, h * 2, w, h ) );


				scene = new THREE.Scene();
				scene.background = new THREE.Color( 0xffffff );
				var light = new THREE.DirectionalLight( 0xffffff );
				light.position.set( 0, 0, 2 ).normalize();
				scene.add( light );
				var light2 = new THREE.DirectionalLight( 0xffffff );
				light.position.set( 0, 0, 2 ).normalize();
				scene.add( light );
				var light3 = new THREE.DirectionalLight( 0xffffff );
				light.position.set( 0, 30, 0 ).normalize();
				scene.add( light );

				var hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.6 );
				hemiLight.color.setHSL( 0.6, 1, 0.6 );
				hemiLight.groundColor.setHSL( 0.095, 1, 0.75 );
				hemiLight.position.set( 0, 10, 0 );
				scene.add( hemiLight );
				hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.6 );
				hemiLight.color.setHSL( 0.6, 1, 0.6 );
				hemiLight.groundColor.setHSL( 0.095, 1, 0.75 );
				hemiLight.position.set( 0, 10, -50 );
				scene.add( hemiLight );

				var amblight = new THREE.AmbientLight( 0x404040 ); // soft white light
				scene.add( light );


				// shadow
				var canvas = document.createElement( 'canvas' );
				canvas.width = 128;
				canvas.height = 128;
				var context = canvas.getContext( '2d' );


				// mtl and obj model loader v 1 
				var onProgress = function ( xhr ) {
					if ( xhr.lengthComputable ) {
						var percentComplete = xhr.loaded / xhr.total * 100;
						console.log( Math.round(percentComplete, 2) + '% downloaded' );
					}
				};
				var onError = function ( xhr ) { };
				THREE.Loader.Handlers.add( /\.dds$/i, new THREE.DDSLoader() );

				//canvas 1 
				var mtlLoader = new THREE.MTLLoader();
				mtlLoader.setPath( 'obj/lovid/Scan2/' );
				mtlLoader.load( 'colorscan3-ColorScan3.mtl', function( materials ) {
					materials.preload();
					var objLoader = new THREE.OBJLoader();
					objLoader.setMaterials( materials );
					objLoader.setPath( 'obj/lovid/Scan2/' );
					objLoader.load( 'colorscan3-ColorScan3.obj', function ( object ) {
						object.position.y = 8;
						object.position.x = -12;
						scene.add( object );
						object1 = object;  
					}, onProgress, onError );
				});
				//canvas 2 
				var mtlLoader = new THREE.MTLLoader();
				mtlLoader.setPath( 'obj/lovid/Scan1/' );
				mtlLoader.load( 'scan1.mtl', function( materials ) {
					materials.preload();
					var objLoader = new THREE.OBJLoader();
					objLoader.setMaterials( materials );
					objLoader.setPath( 'obj/lovid/Scan1/' );
					objLoader.load( 'scan1.obj', function ( object ) {
						object.position.y = 8;
						object.position.x = 0;
						object.position.z = 0; 
						object.rotation.x = 0; 
						scene.add( object );
						object2 = object; 
						//objects.push(object);
					}, onProgress, onError );
				});

				//canvas 3 

				var mtlLoader = new THREE.MTLLoader();
				mtlLoader.setPath( 'obj/lovid/Scan3/' );
				mtlLoader.load( 'colorscanfused1-ColorScanFused1.mtl', function( materials ) {
					materials.preload();
					var objLoader = new THREE.OBJLoader();
					objLoader.setMaterials( materials );
					objLoader.setPath( 'obj/lovid/Scan3/' );
					objLoader.load( 'colorscanfused1-ColorScanFused1.obj', function ( object ) {
						object.position.y = 10;
						object.position.x = 15;
						object.position.z = -5; 
						object.rotation.x = 10; 
						scene.add( object );
						object3 = object; 
					}, onProgress, onError );
				});

				//canvas 4 
				var mtlLoader = new THREE.MTLLoader();
				mtlLoader.setPath( 'obj/lovid/Scan4/' );
				mtlLoader.load( 'findme-july24_scan_3_2.mtl', function( materials ) {
					materials.preload();
					var objLoader = new THREE.OBJLoader();
					objLoader.setMaterials( materials );
					objLoader.setPath( 'obj/lovid/Scan4/' );
					objLoader.load( 'findme-july24_scan_3_2.obj', function ( object ) {
						object.position.y = 0;
						object.position.x = -15;
						object.position.z = -5; 
						object.rotation.x = 2; 
						object.rotation.y = 5; 
						scene.add( object );
						object4 = object; 
					}, onProgress, onError );
				});

				//canvas5
				var mtlLoader = new THREE.MTLLoader();
				mtlLoader.setPath( 'obj/lovid/Scan5/' );
				mtlLoader.load( 'july24scan-Sense.mtl', function( materials ) {
					materials.preload();
					var objLoader = new THREE.OBJLoader();
					objLoader.setMaterials( materials );
					objLoader.setPath( 'obj/lovid/Scan5/' );
					objLoader.load( 'july24scan-Sense.obj', function ( object ) {
						object.position.y = 0;
						object.position.x = 0;
						object.position.z = -10; 
						object.rotation.x = 4; 
						object.rotation.y = 0; 
						scene.add( object );
						object5 = object; 
					}, onProgress, onError );
				});

				//canvas 6 
				var mtlLoader = new THREE.MTLLoader();
				mtlLoader.setPath( 'obj/lovid/Scan6/' );
				mtlLoader.load( 'Scan6.mtl', function( materials ) {
					materials.preload();
					var objLoader = new THREE.OBJLoader();
					objLoader.setMaterials( materials );
					objLoader.setPath( 'obj/lovid/Scan6/' );
					objLoader.load( 'Scan6.obj', function ( object ) {
						object.position.y = 0;
						object.position.x = 15;
						object.position.z = -5; 
						object.rotation.x = 0; 
						object.rotation.y = 2; 
						object.rotation.z = 2; 
						scene.add( object );
						object6 = object; 
					}, onProgress, onError );
				});

				//canvas 7 
				var mtlLoader = new THREE.MTLLoader();
				mtlLoader.setPath( 'obj/lovid/Scan7/' );
				mtlLoader.load( 'scan7.mtl', function( materials ) {
					materials.preload();
					var objLoader = new THREE.OBJLoader();
					objLoader.setMaterials( materials );
					objLoader.setPath( 'obj/lovid/Scan7/' );
					objLoader.load( 'scan7.obj', function ( object ) {
						object.position.y = -10;
						object.position.x = -13;
						object.position.z = 0; 
						object.rotation.x = 0; 
						object.rotation.y = 10; 
						object.rotation.z = 2; 
						scene.add( object );
						object7 = object; 
					}, onProgress, onError );
				});

				//canvas 8 
				var mtlLoader = new THREE.MTLLoader();
				mtlLoader.setPath( 'obj/lovid/Scan8/' );
				mtlLoader.load( 'scan8.mtl', function( materials ) {
					materials.preload();
					var objLoader = new THREE.OBJLoader();
					objLoader.setMaterials( materials );
					objLoader.setPath( 'obj/lovid/Scan8/' );
					objLoader.load( 'scan8.obj', function ( object ) {
						object.position.y = -10;
						object.position.x = 0;
						object.position.z = 0; 
						object.rotation.x = 0; 
						object.rotation.y = 0; 
						object.rotation.z = 0; 
						scene.add( object );
						object8 = object; 
					}, onProgress, onError );
				});

				//canvas 9 
				
				var mtlLoader = new THREE.MTLLoader();
				mtlLoader.setPath( 'obj/lovid/Scan2/');
				mtlLoader.load( 'colorscan3-ColorScan3.mtl', function( materials ) {
					materials.preload();
					var objLoader = new THREE.OBJLoader();
					objLoader.setMaterials( materials );
					objLoader.setPath( 'obj/lovid/Scan2/');
					objLoader.load( 'colorscan3-ColorScan3.obj', function ( object ) {
						object.position.y = -10;
						object.position.x = 13;
						object.position.z = 0; 
						object.rotation.x = 0; 
						object.rotation.y = 10; 
						object.rotation.z = 0; 
						scene.add( object );
						object9 = object; 
					}, onProgress, onError );
				});
				
				//

			


				var gradient = context.createRadialGradient( canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2 );
		
				
				renderer = new THREE.WebGLRenderer( { antialias: true } );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( 300, 200 );
				document.body.appendChild(renderer.domElement);
				document.addEventListener( 'mousemove', onDocumentMouseMove, false );
				document.addEventListener( 'mousedown', onDocumentMouseDown, false );


				canvas1.addEventListener( 'mousemove', onCanvas1MouseMove, false );
				canvas1.addEventListener( 'mousedown', onCanvas1MouseDown, false );
				canvas2.addEventListener( 'mousedown', onCanvas2MouseDown, false );
				canvas3.addEventListener( 'mousedown', onCanvas3MouseDown, false );
				canvas4.addEventListener( 'mousedown', onCanvas4MouseDown, false );
				canvas5.addEventListener( 'mousedown', onCanvas5MouseDown, false );
				canvas6.addEventListener( 'mousedown', onCanvas6MouseDown, false );
				canvas7.addEventListener( 'mousedown', onCanvas7MouseDown, false );
				canvas8.addEventListener( 'mousedown', onCanvas8MouseDown, false );
				canvas9.addEventListener( 'mousedown', onCanvas9MouseDown, false );

				
				//console.log(cameras.length); 
				console.log(views.length); 

			
			}
			
			//check for mouse click on each canvas
			//true brings object[] forward on the z axis 
			var mouseClick1 = false;  
			var mouseClick2 = false; 
			var mouseClick3 = false; 
			var mouseClick4 = false; 
			var mouseClick5 = false;
			var mouseClick6 = false;
			var mouseClick7 = false;
			var mouseClick8 = false;
			var mouseClick9 = false;

			function onCanvas1MouseMove( event ) { 
				
				if (!mouseClick1) {
            		return;
        		}
        	 	
        		/*evt.preventDefault();
        		var object1 = objects[0];
        		var deltaX = evt.clientX - mouseX, 
            		deltaY = evt.clientY - mouseY;
        		mouseX = evt.clientX;
        		mouseY = evt.clientY;
        		rotateScene1(deltaX, deltaY);*/
    		}

    		function onCanvas1MouseDown( event ) {
				event.preventDefault(); 
				if (mouseClick1 == false) { 
					mouseClick1 = true; 
				} else if (mouseClick1 == true){
					mouseClick1 = false; 
				}
				console.log(mouseClick1);
				//console.log(object1); 
				if (mouseClick1 == true) { 
					object1.position.x = 0; 
					object1.position.y = 0; 
					while (object1.position.z <= 50.) {
        				object1.position.z += .001; 
        				object1.position.x = -12; 
						object1.position.y = 8; 
        		
        			}	
        		}
        		else if (mouseClick1 == false){ 
        			object1.position.z = 0; 

        		}	

			}
			function onCanvas2MouseDown( event ) {
				event.preventDefault(); 
				if (mouseClick2 == false) { 
					mouseClick2 = true; 
				} else if (mouseClick2 == true){
					mouseClick2 = false; 
				}
				console.log(mouseClick2);
				//console.log(object1); 
				if (mouseClick2 == true) { 
					while (object2.position.z <= 50.) {
        				object2.position.z += .001; 
        		
        			}	
        		}
        		else if (mouseClick2 == false){ 
        			object2.position.z = 0; 
        		}	

			}
			function onCanvas3MouseDown( event ) {
				event.preventDefault(); 
				if (mouseClick3 == false) { 
					mouseClick3 = true; 
				} else if (mouseClick3 == true){
					mouseClick3 = false; 
				}
				console.log(mouseClick3);
				//console.log(object1); 
				if (mouseClick3 == true) { 
			
					while (object3.position.z <= 45.) {
        				object3.position.z += .001; 
        		
        			}	
        		}
        		else if (mouseClick3 == false){ 
        			object3.position.z = -5.; 
        		
        		}	

			}
			function onCanvas4MouseDown( event ) {
				event.preventDefault(); 
				if (mouseClick4 == false) { 
					mouseClick4 = true; 
				} else if (mouseClick4 == true){
					mouseClick4 = false; 
				}
				console.log(mouseClick4);
				//console.log(object1); 
				if (mouseClick4 == true) { 
					while (object4.position.z <= 45.) {
        				object4.position.z += .001; 
        		
        			}	
        		}
        		else if (mouseClick4 == false){ 
        			object4.position.z = -5.; 
        		}	

			}
			function onCanvas5MouseDown( event ) {
				event.preventDefault(); 
				if (mouseClick5 == false) { 
					mouseClick5 = true; 
				} else if (mouseClick5 == true){
					mouseClick5 = false; 
				}
				console.log(mouseClick5);
				//console.log(object1); 
				if (mouseClick5 == true) { 
					while (object5.position.z <= 40.) {
        				object5.position.z += .001; 
        		
        			}	
        		}
        		else if (mouseClick5 == false){ 
        			object5.position.z = -10.; 
        		}	

			}
			function onCanvas6MouseDown( event ) {
				event.preventDefault(); 
				if (mouseClick6 == false) { 
					mouseClick6 = true; 
				} else if (mouseClick6 == true){
					mouseClick6 = false; 
				}
				console.log(mouseClick6);
				//console.log(object1); 
				if (mouseClick6 == true) { 
					while (object6.position.z <= 45.) {
        				object6.position.z += .001; 
        		
        			}	
        		}
        		else if (mouseClick6 == false){ 
        			object6.position.z = -5.; 
        		}	

			}
			function onCanvas7MouseDown( event ) {
				event.preventDefault(); 
				if (mouseClick7 == false) { 
					mouseClick7 = true; 
				} else if (mouseClick7 == true){
					mouseClick7 = false; 
				}
				console.log(mouseClick7);
				//console.log(object1); 
				if (mouseClick7 == true) { 
					while (object7.position.z <= 50.) {
        				object7.position.z += .001; 
        		
        			}	
        		}
        		else if (mouseClick7 == false){ 
        			object7.position.z = 0.; 
        		}	

			}
			function onCanvas8MouseDown( event ) {
				event.preventDefault(); 
				if (mouseClick8 == false) { 
					mouseClick8 = true; 
				} else if (mouseClick8 == true){
					mouseClick8 = false; 
				}
				console.log(mouseClick8);
				//console.log(object1); 
				if (mouseClick8 == true) { 
					while (object8.position.z <= 50.) {
        				object8.position.z += .001; 
        		
        			}	
        		}
        		else if (mouseClick8 == false){ 
        			object8.position.z = 0.; 
        		}	

			}
			function onCanvas9MouseDown( event ) {
				event.preventDefault(); 
				if (mouseClick9 == false) { 
					mouseClick9 = true; 
				} else if (mouseClick9 == true){
					mouseClick9 = false; 
				}
				console.log(mouseClick9);
				//console.log(object1); 
				if (mouseClick9 == true) { 
					while (object9.position.z <= 50.) {
        				object9.position.z += .001; 
        		
        			}	
        		}
        		else if (mouseClick9 == false){ 
        			object9.position.z = 0.; 
        		}	

			}

			



			//all canvases move 
			function onDocumentMouseMove( event ) {
				mouseX = event.clientX - windowHalfX;
				mouseY = event.clientY - windowHalfY;
			}
			// click on object
			function onDocumentMouseDown( event ) {
				event.preventDefault();


			}

			function export_obj ( object ) {
				var content = (''); 
				window.open( content, ''); 
			}

			function animate() {

				for ( var i = 0; i < views.length; ++i ) {
					
					views[ i ].render();
					
				}
				
				

				requestAnimationFrame( animate );
				
			}

/*
			function render() {

				raycaster.setFromCamera( mouse, camera );

				var intersects = raycaster.intersectObjects( scene.canvas );

				if ( intersects.length > 0 ) {
					if ( INTERSECTED != intersects[ 0 ].object ) {
						if ( INTERSECTED ) INTERSECTED.material.emissive.setHex( INTERSECTED.currentHex );
						INTERSECTED = intersects[ 0 ].object;
						INTERSECTED.currentHex = INTERSECTED.material.emissive.getHex();
						INTERSECTED.material.emissive.setHex( 0xff0000 );
					}
				} else {
					if ( INTERSECTED ) INTERSECTED.material.emissive.setHex( INTERSECTED.currentHex );
					INTERSECTED = null;
				}
				renderer.render( scene, camera )

			}*/
		</script>

	</body>
</html>